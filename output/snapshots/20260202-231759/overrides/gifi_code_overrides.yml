version: 1

# These overrides exist because the `curlys-books` chart_of_accounts export does not currently
# contain CRA-accurate GIFI codes for several accounts that materially affect T2 filing.
#
# Goal: ensure `scripts/80_build_trial_balance.py` and downstream exports produce CRA-aligned
# GIFI codes without any manual SQL patches.
#
# References:
# - CRA GIFI index (RC4088): see `/home/clarencehub/curlys-books/t2-filing-fy2024-fy2025/General Index of Financial Information (GIFI) - Canada.ca.html`
#
# Notes:
# - We mostly use GIFI “short” codes (e.g., 8520, 8710, 9270) to keep the schedule compact.
# - Where we need more specificity (rent, repairs, vehicle), we use the specific code.

gifi_code_overrides:
  # Exact account_code -> gifi_code mappings.
  exact:
    # Balance sheet (assets)
    "1000": "1001"   # Cash
    "1070": "1001"   # Cash
    "1200": "1121"   # Inventory of goods for sale
    "1210": "1121"   # Inventory of goods for sale
    "1220": "1121"   # Inventory of goods for sale (supplements)
    "1230": "1121"   # Inventory of goods for sale
    "1300": "1484"   # Prepaid expenses
    "2500": "1301"   # Due from individual shareholder(s)

    # Balance sheet (liabilities)
    "2000": "2620"   # Amounts payable and accrued liabilities
    "2010": "2620"   # A/P - Capital Foodservice
    "2020": "2620"   # A/P - GFS
    "2030": "2620"   # A/P - Pepsi
    "2310": "2620"   # Amounts payable and accrued liabilities (tips payable)
    "2700": "2620"   # Amounts payable and accrued liabilities (CPP)
    "2710": "2620"   # Amounts payable and accrued liabilities (EI)
    "2720": "2620"   # Amounts payable and accrued liabilities (income tax)
    "2400": "2781"   # Due to individual shareholder(s)
    "2410": "2781"   # Due to individual shareholder(s)
    "2200": "2680"   # Taxes payable (GST/HST)
    "2210": "2680"   # Taxes payable (netted with 2200 for GIFI 2680)

    # Equity
    "3000": "3500"   # Common shares
    "3100": "3600"   # Retained earnings/deficit
    "3200": "3600"   # Retained earnings/deficit (current year earnings rolled in reports)
    "3400": "3600"   # Retained earnings/deficit (dividends reduce retained earnings)

    # Revenue
    "4000": "8000"   # Trade sales
    "4030": "8000"   # Trade sales
    "4090": "8000"   # Trade sales (to be reviewed)
    "4100": "8000"   # Trade sales
    "4900": "8000"   # Trade sales (netted via contra-revenue)

    # Operating expenses / other
    "5300": "8710"   # Interest and bank charges (merchant processing fees)
    "6000": "8710"   # Interest and bank charges (bank charges)
    "6210": "8710"   # Interest and bank charges (payment processing)
    "8100": "8710"   # Interest and bank charges
    "6100": "8911"   # Real estate rental
    "6300": "8960"   # Repairs and maintenance
    "6400": "8690"   # Insurance
    "6500": "8520"   # Advertising and promotion
    "6521": "8520"   # Advertising and promotion (events)
    "7110": "8523"   # Meals and entertainment
    "6510": "8860"   # Professional fees
    "6700": "8860"   # Professional fees
    "7000": "9060"   # Salaries and wages
    "7100": "8622"   # Employer's portion of employee benefits (CPP/EI)
    "6230": "9225"   # Telephone and telecommunications (internet)
    "6550": "9275"   # Delivery, freight and express (shipping/delivery)
    "6600": "8810"   # Office expenses
    "6610": "8813"   # Data processing (computer hardware under capitalization threshold)
    "6620": "8813"   # Data processing (software / SaaS)
    "6350": "9131"   # Small tools
    "5400": "8518"   # Inventory shrinkage/spoilage (treated as cost of sales)
    "5410": "8518"   # Purchase returns & allowances (reduces cost of sales)
    "9100": "9270"   # Other expenses (pending receipt)
    "9200": "9281"   # Vehicle expenses (fuel pending mileage conversion)
    "9270": "9281"   # Vehicle expenses (mileage reimbursement)
    "9000": "8518"   # Cost of sales (container deposits)

  # Numeric account_code ranges (inclusive). Applied after `exact`, and skipped for any account_code
  # already present in `exact`.
  ranges:
    - start: 5000
      end: 5199
      gifi_code: "8518"   # Cost of sales
      note: "COGS subaccounts + freight-in"
    - start: 5200
      end: 5299
      gifi_code: "9130"   # Supplies
      note: "Packaging & operating supplies"
